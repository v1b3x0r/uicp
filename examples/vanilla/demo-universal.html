<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Universal UI Protocol - Vanilla JS Demo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover { background: #0056b3; }
        
        /* Universal Drawer Styles */
        [data-drawer="content"] {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: white;
            box-shadow: -2px 0 10px rgba(0,0,0,0.1);
            transition: right 0.3s ease;
            padding: 20px;
            box-sizing: border-box;
            z-index: 1000;
        }
        
        [data-drawer="content"][data-drawer-open] {
            right: 0;
        }
        
        .drawer-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        
        .drawer-backdrop.active {
            opacity: 1;
            visibility: visible;
        }
        
        .demo-section {
            border: 2px dashed #ddd;
            padding: 15px;
            margin: 15px 0;
            border-radius: 6px;
        }
        
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéØ Universal UI Protocol - Vanilla JS</h1>
        <p>‡πÄ‡∏ó‡∏™‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Universal Drawer Protocol ‡∏î‡πâ‡∏ß‡∏¢ Pure JavaScript ‡πÅ‡∏ö‡∏ö lean</p>
        
        <!-- Demo 1: Auto-scan with data attributes -->
        <div class="card">
            <h2>Demo 1: Auto-Scan Pattern</h2>
            <p>‡πÉ‡∏ä‡πâ data attributes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö auto-discovery</p>
            
            <div class="demo-section" data-drawer="container">
                <button data-drawer="trigger">‡πÄ‡∏õ‡∏¥‡∏î Drawer (Auto-scan)</button>
                
                <div data-drawer="content" 
                     data-trap-focus="true" 
                     data-close-escape="true" 
                     data-lock-scroll="true">
                    <h3>Auto-Scan Drawer</h3>
                    <p>Drawer ‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å auto-scan ‡πÅ‡∏•‡∏∞ register ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
                    <button data-drawer="close">‡∏õ‡∏¥‡∏î</button>
                </div>
            </div>
            
            <pre><code>// HTML
&lt;div data-drawer="container"&gt;
  &lt;button data-drawer="trigger"&gt;‡πÄ‡∏õ‡∏¥‡∏î&lt;/button&gt;
  &lt;div data-drawer="content"&gt;...&lt;/div&gt;
&lt;/div&gt;

// JavaScript - Auto-init
import { autoInit } from '@uip/adapter-vanilla';
autoInit();</code></pre>
        </div>
        
        <!-- Demo 2: Manual setup -->
        <div class="card">
            <h2>Demo 2: Manual Setup</h2>
            <p>Setup ‡∏î‡πâ‡∏ß‡∏¢ selectors ‡πÅ‡∏ö‡∏ö manual</p>
            
            <button id="manual-trigger">‡πÄ‡∏õ‡∏¥‡∏î Manual Drawer</button>
            
            <div id="manual-content" data-drawer="content">
                <h3>Manual Setup Drawer</h3>
                <p>Setup ‡∏î‡πâ‡∏ß‡∏¢ createDrawer() ‡πÅ‡∏•‡∏∞ selectors</p>
                <button onclick="manualDrawer.close()">‡∏õ‡∏¥‡∏î</button>
                
                <div style="margin-top: 20px;">
                    <button onclick="manualDrawer.toggle()">Toggle</button>
                    <button onclick="console.log(manualDrawer.getState())">Log State</button>
                </div>
            </div>
            
            <pre><code>// JavaScript
import { createDrawer } from '@uip/adapter-vanilla';

const drawer = createDrawer(
  '#manual-trigger',
  '#manual-content'
);</code></pre>
        </div>
        
        <!-- Demo 3: Universal API -->
        <div class="card">
            <h2>Demo 3: Universal Core API</h2>
            <p>‡πÉ‡∏ä‡πâ Core API ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö maximum control</p>
            
            <button id="core-trigger">‡πÄ‡∏õ‡∏¥‡∏î Core API Drawer</button>
            
            <div id="core-content" data-drawer="content">
                <h3>Core API Drawer</h3>
                <p>‡πÉ‡∏ä‡πâ createUniversalDrawer ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö enhanced features</p>
                <button onclick="coreDrawer.close()">‡∏õ‡∏¥‡∏î</button>
                
                <div style="margin-top: 20px;">
                    <label>
                        <input type="checkbox" id="backdrop-toggle" checked>
                        Show backdrop
                    </label>
                </div>
            </div>
            
            <pre><code>// JavaScript
import { createUniversalDrawer } from '@uip/adapter-vanilla';

const drawer = createUniversalDrawer({
  onOpen: () => console.log('Opening'),
  onClose: () => console.log('Closing')
});

drawer.registerTrigger(triggerEl);
drawer.registerContent(contentEl);</code></pre>
        </div>
    </div>
    
    <!-- Backdrop element -->
    <div class="drawer-backdrop" id="backdrop"></div>
    
    <script type="module">
        // Simulate the Universal UI Protocol imports
        // In real app, these would be: import { createDrawer, autoInit } from '@uip/adapter-vanilla';
        
        // Mock implementation for demo
        const createDrawer = (triggerSelector, contentSelector, options = {}) => {
            const trigger = document.querySelector(triggerSelector);
            const content = document.querySelector(contentSelector);
            const backdrop = document.getElementById('backdrop');
            
            if (!trigger || !content) return null;
            
            let isOpen = false;
            
            const drawer = {
                open() {
                    isOpen = true;
                    content.setAttribute('data-drawer-open', '');
                    backdrop.classList.add('active');
                    options.onOpen?.();
                },
                
                close() {
                    isOpen = false;
                    content.removeAttribute('data-drawer-open');
                    backdrop.classList.remove('active');
                    options.onClose?.();
                },
                
                toggle() {
                    isOpen ? this.close() : this.open();
                },
                
                getState() {
                    return { isOpen, isAnimating: false };
                }
            };
            
            trigger.addEventListener('click', () => drawer.open());
            backdrop.addEventListener('click', () => drawer.close());
            
            return drawer;
        };
        
        const createUniversalDrawer = (options = {}) => {
            const backdrop = document.getElementById('backdrop');
            let isOpen = false;
            let triggerEl, contentEl;
            
            return {
                registerTrigger(element) {
                    triggerEl = element;
                    const handler = () => this.open();
                    element.addEventListener('click', handler);
                    return () => element.removeEventListener('click', handler);
                },
                
                registerContent(element) {
                    contentEl = element;
                    return () => {};
                },
                
                open() {
                    isOpen = true;
                    contentEl?.setAttribute('data-drawer-open', '');
                    backdrop.classList.add('active');
                    options.onOpen?.();
                },
                
                close() {
                    isOpen = false;
                    contentEl?.removeAttribute('data-drawer-open');
                    backdrop.classList.remove('active');
                    options.onClose?.();
                },
                
                toggle() {
                    isOpen ? this.close() : this.open();
                },
                
                getState() {
                    return { isOpen, isAnimating: false };
                },
                
                autoScan(container = document) {
                    const triggers = container.querySelectorAll('[data-drawer="trigger"]');
                    const contents = container.querySelectorAll('[data-drawer="content"]');
                    
                    triggers.forEach(el => this.registerTrigger(el));
                    contents.forEach(el => this.registerContent(el));
                    
                    return () => {};
                }
            };
        };
        
        const autoInit = () => {
            document.querySelectorAll('[data-drawer="container"]').forEach(container => {
                const drawer = createUniversalDrawer();
                drawer.autoScan(container);
            });
        };
        
        // Initialize demos
        autoInit();
        
        // Manual drawer
        window.manualDrawer = createDrawer('#manual-trigger', '#manual-content', {
            onOpen: () => console.log('Manual drawer opening'),
            onClose: () => console.log('Manual drawer closing')
        });
        
        // Core API drawer
        window.coreDrawer = createUniversalDrawer({
            onOpen: () => console.log('Core drawer opening'),
            onClose: () => console.log('Core drawer closing')
        });
        
        coreDrawer.registerTrigger(document.getElementById('core-trigger'));
        coreDrawer.registerContent(document.getElementById('core-content'));
        
        // Backdrop toggle
        document.getElementById('backdrop-toggle').addEventListener('change', (e) => {
            const backdrop = document.getElementById('backdrop');
            if (!e.target.checked) {
                backdrop.style.display = 'none';
            } else {
                backdrop.style.display = 'block';
            }
        });
        
    </script>
</body>
</html>
