<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UIKit - Vanilla JS Example</title>
  <link rel="stylesheet" href="../../packages/ui-skin-vanilla/src/drawer.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 2rem;
    }
    
    h1 {
      margin-bottom: 2rem;
      color: #111;
    }
    
    .demo-section {
      margin-bottom: 3rem;
    }
    
    .demo-section h2 {
      margin-bottom: 1rem;
      color: #444;
    }
    
    .btn {
      background: #3b82f6;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 0.375rem;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
      margin-right: 1rem;
      margin-bottom: 1rem;
    }
    
    .btn:hover {
      background: #2563eb;
    }
    
    .btn:focus {
      outline: 2px solid #3b82f6;
      outline-offset: 2px;
    }
    
    .btn--secondary {
      background: #6b7280;
    }
    
    .btn--secondary:hover {
      background: #4b5563;
    }
    
    .demo-content {
      height: 200vh;
      background: linear-gradient(to bottom, #f3f4f6, #e5e7eb);
      padding: 2rem;
      border-radius: 0.5rem;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>UIKit Drawer Demo</h1>
    
    <div class="demo-section">
      <h2>Basic Drawers</h2>
      <button class="btn" id="left-trigger">Left Drawer</button>
      <button class="btn" id="right-trigger">Right Drawer</button>
      <button class="btn" id="top-trigger">Top Drawer</button>
      <button class="btn" id="bottom-trigger">Bottom Drawer</button>
    </div>
    
    <div class="demo-section">
      <h2>Features</h2>
      <ul>
        <li>✅ Keyboard navigation (Tab, Shift+Tab, ESC)</li>
        <li>✅ Focus trap when open</li>
        <li>✅ Body scroll lock</li>
        <li>✅ Touch/mouse drag support</li>
        <li>✅ ARIA attributes</li>
        <li>✅ Smooth animations</li>
        <li>✅ Reduced motion support</li>
      </ul>
    </div>
    
    <div class="demo-content">
      <h2>Scrollable Content</h2>
      <p>Try opening a drawer and notice that the body scroll is locked.</p>
      <p>The drawer can be closed by:</p>
      <ul>
        <li>Clicking the close button</li>
        <li>Pressing ESC key</li>
        <li>Clicking the overlay</li>
        <li>Dragging/swiping (on touch devices)</li>
      </ul>
    </div>
  </div>
  
  <!-- Left Drawer -->
  <div id="left-drawer" class="drawer drawer--left" aria-hidden="true">
    <div class="drawer-header">
      <h2>Left Drawer</h2>
      <button class="drawer-close" aria-label="Close drawer">×</button>
    </div>
    <div class="drawer-body">
      <p>This is a left-side drawer with gesture support.</p>
      <p>Try dragging it to close!</p>
      <br>
      <button class="btn btn--secondary">Focusable Button 1</button>
      <button class="btn btn--secondary">Focusable Button 2</button>
      <br><br>
      <input type="text" placeholder="Test input" style="padding: 0.5rem; width: 100%;">
    </div>
  </div>
  <div class="drawer-overlay" id="left-overlay"></div>
  
  <!-- Right Drawer -->
  <div id="right-drawer" class="drawer drawer--right" aria-hidden="true">
    <div class="drawer-header">
      <h2>Right Drawer</h2>
      <button class="drawer-close" aria-label="Close drawer">×</button>
    </div>
    <div class="drawer-body">
      <p>This is a right-side drawer.</p>
      <p>It also supports all the same features!</p>
    </div>
  </div>
  <div class="drawer-overlay" id="right-overlay"></div>
  
  <!-- Top Drawer -->
  <div id="top-drawer" class="drawer drawer--top" aria-hidden="true">
    <div class="drawer-header">
      <h2>Top Drawer</h2>
      <button class="drawer-close" aria-label="Close drawer">×</button>
    </div>
    <div class="drawer-body">
      <p>This drawer slides from the top.</p>
    </div>
  </div>
  <div class="drawer-overlay" id="top-overlay"></div>
  
  <!-- Bottom Drawer -->
  <div id="bottom-drawer" class="drawer drawer--bottom" aria-hidden="true">
    <div class="drawer-header">
      <h2>Bottom Drawer</h2>
      <button class="drawer-close" aria-label="Close drawer">×</button>
    </div>
    <div class="drawer-body">
      <p>This drawer slides from the bottom.</p>
    </div>
  </div>
  <div class="drawer-overlay" id="bottom-overlay"></div>
  
  <script type="module">
    import { createDrawer, registerDrawerDrag } from '../../packages/ui-core/src/index.js';
    
    // Left drawer
    const leftDrawer = createDrawer();
    const leftTrigger = document.getElementById('left-trigger');
    const leftContent = document.getElementById('left-drawer');
    const leftOverlay = document.getElementById('left-overlay');
    const leftClose = leftContent.querySelector('.drawer-close');
    
    leftDrawer.registerTrigger(leftTrigger);
    leftDrawer.registerContent(leftContent);
    registerDrawerDrag(leftDrawer, leftContent, { axis: 'x', threshold: 0.3 });
    
    leftClose.addEventListener('click', () => leftDrawer.close());
    leftOverlay.addEventListener('click', () => leftDrawer.close());
    
    // Right drawer
    const rightDrawer = createDrawer();
    const rightTrigger = document.getElementById('right-trigger');
    const rightContent = document.getElementById('right-drawer');
    const rightOverlay = document.getElementById('right-overlay');
    const rightClose = rightContent.querySelector('.drawer-close');
    
    rightDrawer.registerTrigger(rightTrigger);
    rightDrawer.registerContent(rightContent);
    registerDrawerDrag(rightDrawer, rightContent, { axis: 'x', threshold: 0.3 });
    
    rightClose.addEventListener('click', () => rightDrawer.close());
    rightOverlay.addEventListener('click', () => rightDrawer.close());
    
    // Top drawer
    const topDrawer = createDrawer();
    const topTrigger = document.getElementById('top-trigger');
    const topContent = document.getElementById('top-drawer');
    const topOverlay = document.getElementById('top-overlay');
    const topClose = topContent.querySelector('.drawer-close');
    
    topDrawer.registerTrigger(topTrigger);
    topDrawer.registerContent(topContent);
    registerDrawerDrag(topDrawer, topContent, { axis: 'y', threshold: 0.3 });
    
    topClose.addEventListener('click', () => topDrawer.close());
    topOverlay.addEventListener('click', () => topDrawer.close());
    
    // Bottom drawer
    const bottomDrawer = createDrawer();
    const bottomTrigger = document.getElementById('bottom-trigger');
    const bottomContent = document.getElementById('bottom-drawer');
    const bottomOverlay = document.getElementById('bottom-overlay');
    const bottomClose = bottomContent.querySelector('.drawer-close');
    
    bottomDrawer.registerTrigger(bottomTrigger);
    bottomDrawer.registerContent(bottomContent);
    registerDrawerDrag(bottomDrawer, bottomContent, { axis: 'y', threshold: 0.3 });
    
    bottomClose.addEventListener('click', () => bottomDrawer.close());
    bottomOverlay.addEventListener('click', () => bottomDrawer.close());
    
    // Update overlay visibility
    leftDrawer.onChange((state) => {
      leftOverlay.style.display = state.isOpen ? 'block' : 'none';
    });
    
    rightDrawer.onChange((state) => {
      rightOverlay.style.display = state.isOpen ? 'block' : 'none';
    });
    
    topDrawer.onChange((state) => {
      topOverlay.style.display = state.isOpen ? 'block' : 'none';
    });
    
    bottomDrawer.onChange((state) => {
      bottomOverlay.style.display = state.isOpen ? 'block' : 'none';
    });
  </script>
</body>
</html>